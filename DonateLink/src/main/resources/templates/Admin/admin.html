<!doctype html>
<html class="no-js" lang="zxx">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>DonateLink</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="site.webmanifest">
<link rel="shortcut icon" type="image/x-icon"
	href="../assets/img/logo/title_logo.jpg">
<!-- CSS here -->
<link rel="stylesheet" href="../assets/css/bootstrap.min.css">
<link rel="stylesheet" href="../assets/css/owl.carousel.min.css">
<link rel="stylesheet" href="../assets/css/slicknav.css">
<link rel="stylesheet" href="../assets/css/flaticon.css">
<link rel="stylesheet" href="../assets/css/progressbar_barfiller.css">
<link rel="stylesheet" href="../assets/css/gijgo.css">
<link rel="stylesheet" href="../assets/css/animate.min.css">
<link rel="stylesheet" href="../assets/css/animated-headline.css">
<link rel="stylesheet" href="../assets/css/magnific-popup.css">
<link rel="stylesheet" href="../../assets/css/fontawesome-all.min.css">
<link rel="stylesheet" href="../../assets/css/themify-icons.css">
<link rel="stylesheet" href="../../assets/css/slick.css">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/flaticon/2.1.0/font/flaticon.css">
<link rel="stylesheet" href="../../assets/css/nice-select.css">
<link rel="stylesheet" href="../../assets/css/style.css">
<style type="text/css">
p {
	text-align: justify;
}

.signout-icon i {
	font-size: 30px; /* Adjust size as needed */
	color: black; /* Stylish red color */
	transition: color 0.3s ease-in-out;
}

.signout-icon i:hover {
	color: white; /* Darker red on hover */
}

/* Table Styling */
.table {
	width: 100%;
	border-collapse: collapse;
	background-color: #fff;
	border-radius: 10px;
	overflow: hidden;
}

.table thead {
	background-color: #343a40;
	color: white;
}

.table th, .table td {
	padding: 12px;
	text-align: center;
	border: 1px solid #ddd;
}

.table-hover tbody tr:hover {
	background-color: #f1f1f1;
}

.guide-dropdown {
	position: relative;
	width: 100%;
	padding: 6px;
	border: 1px solid #ddd;
	border-radius: 5px;
	z-index: 1050;
}

.guide-dropdown:focus {
	position: absolute;
	width: auto;
	z-index: 9999;
}

.table-responsive {
	position: relative;
	overflow: visible !important;
}

/* Update Button */
.update-guide-btn {
	background-color: #007bff;
	color: white;
	border: none;
	padding: 6px 12px;
	border-radius: 5px;
	cursor: pointer;
}

.update-guide-btn:hover {
	background-color: #0056b3;
}

/* Status Badges */
.badge {
	padding: 8px 12px;
	font-size: 14px;
	border-radius: 12px;
}

.badge-success {
	background-color: #28a745;
	color: white;
}

.badge-warning {
	background-color: #ffc107;
	color: black;
}

/* Toggle Switch */
.switch {
	position: relative;
	display: inline-block;
	width: 40px;
	height: 20px;
}

.switch input {
	opacity: 0;
	width: 0;
	height: 0;
}

.slider {
	position: absolute;
	cursor: pointer;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: #ccc;
	transition: .4s;
	border-radius: 20px;
}

.slider:before {
	position: absolute;
	content: "";
	height: 14px;
	width: 14px;
	left: 3px;
	bottom: 3px;
	background-color: white;
	transition: .4s;
	border-radius: 50%;
}

input:checked+.slider {
	background-color: #28a745;
}

input:checked+.slider:before {
	transform: translateX(20px);
}
</style>
<script>
document.addEventListener("DOMContentLoaded", function () {
    // Approval Toggle Functionality
    const toggles = document.querySelectorAll(".approval-toggle");

    toggles.forEach(toggle => {
        toggle.addEventListener("change", function () {
            const username = this.getAttribute("data-username");
            const status = this.checked;

            fetch(`/EduSphere/updateApproval?username=${username}&status=${status}`, {
                method: "POST"
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const statusCell = this.closest("tr").querySelector("td:nth-child(2)");

                    if (data.status) {
                        statusCell.innerHTML = '<span class="badge badge-success">Approved</span>';
                    } else {
                        statusCell.innerHTML = '<span class="badge badge-warning">Pending</span>';
                    }

                    checkPendingApprovals();
                }
            })
            .catch(error => console.error("Error updating approval:", error));
        });
    });

    function checkPendingApprovals() {
        const pendingRows = document.querySelectorAll("td span.badge-warning");
        document.getElementById("noPendingMessage").style.display = pendingRows.length === 0 ? "block" : "none";
    }

    checkPendingApprovals();

    // Guide Dropdown Update Functionality
    const updateButtons = document.querySelectorAll(".update-guide-btn");
});

function hideUpdateResult() {
    const elem = document.getElementById("update-result");
    if (elem) elem.style.display = "none";
}
setInterval(hideUpdateResult, 5000);

function showCourseDetails() {
    document.getElementById("course-details").style.display = "block";
    document.getElementById("teacher-approval").style.display = "none";
    document.getElementById("Psychometric-Analysis").style.display = "none";
}

function showTeacherApproval() {
    document.getElementById("course-details").style.display = "none";
    document.getElementById("teacher-approval").style.display = "block";
    document.getElementById("Psychometric-Analysis").style.display = "none";
}
</script>
</head>
<body>
	<!-- ? Preloader Start -->
	<div id="preloader-active">
		<div
			class="preloader d-flex align-items-center justify-content-center">
			<div class="preloader-inner position-relative">
				<div class="preloader-circle"></div>
				<div class="preloader-img pere-text">
					<img src="../assets/img/logo/title_logo.jpg" alt="">
				</div>
			</div>
		</div>
	</div>
	<!-- Preloader Start -->
	<main>
		<!--? slider Area Start-->
		<section class="slider-area slider-area2">
			<div class="slider-active">
				<!-- Single Slider -->
				<div class="single-slider slider-height2">
					<div class="container">
						<div class="row">
							<div class="col-xl-8 col-lg-11 col-md-12">
								<div class="hero__caption hero__caption2">
									<h1 data-animation="bounceIn" data-delay="0.2s">Admin Page</h1>
									<!-- breadcrumb End -->
									<nav aria-label="breadcrumb">
										<ol class="breadcrumb">
											<li class="breadcrumb-item"><a href="#"
												style="font-size: 18px; color: black;" onclick="showCourseDetails()">View
													Donations</a></li>
											<li class="breadcrumb-item"><a href="#"
												style="font-size: 18px; color: black;" onclick="showTeacherApproval()">Charity
													Approval</a></li>
										</ol>
									</nav>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="course-details"
			style="margin-top: 20px; display: block;" id="course-details">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<h2 class="contact-title">Donations</h2>
					</div>
					<div class="col-lg-8" style="min-width: 110%;">
						<div class="table-responsive">
							<table
								class="table table-bordered table-hover table-striped text-center shadow-lg">
								<thead class="thead-dark">
									<tr>
										<th scope="col" style="min-width: 150px;">Created By</th>
										<th scope="col" style="min-width: 150px;">Donation Item</th>
										<th scope="col" style="min-width: 150px;">Raised</th>
										<th scope="col" style="min-width: 300px;">Required</th>
										<th scope="col" style="min-width: 120px;">Category</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="donate : ${donate}">
										<td th:text="${donate.username}"></td>
										<td th:text="${donate.donationItem}"></td>
										<td th:text="${donate.donation_raised}"></td>
										<td th:text="${donate.donation_target}"></td>
										<td th:text="${donate.donation_category}"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section class="teacher-approval"
			style="margin-top: 20px; display: none;" id="teacher-approval">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<h2 class="contact-title">Teacher Approval</h2>
					</div>
					<div class="col-lg-12">
						<div class="table-responsive">
							<table
								class="table table-bordered table-hover table-striped text-center shadow-lg">
								<thead class="thead-dark">
									<tr>
										<th scope="col">Username</th>
										<th scope="col">Approval Status</th>
										<th scope="col">Action</th>
									</tr>
								</thead>
								<tbody id="teacherTable">
									<tr th:each="charity : ${charity}">
										<td th:text="${charity.username}"></td>
										<td><span
											th:classappend="${charity.approval} ? 'badge badge-success' : 'badge badge-warning'"
											th:text="${charity.approval} ? 'Approved' : 'Pending'">
										</span></td>
										<td><label class="switch"> <input type="checkbox"
												class="approval-toggle" th:checked="${charity.approval}"
												th:data-username="${charity.username}"> <span
												class="slider"></span>
										</label></td>
									</tr>
								</tbody>
							</table>
						</div>
						<p id="noPendingMessage" class="text-center text-danger"
							style="display: none;">No pending approvals</p>
					</div>
				</div>
			</div>
		</section>
	</main>
	<footer>
		<div class="footer-wrapper section-bg2"
			data-background="../assets/img/gallery/footer_bg.png">
			<!-- Footer Top-->
			<div class="footer-area footer-padding">
				<div class="container">
					<div class="row d-flex justify-content-between">
						<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6">
							<div class="single-footer-caption mb-50">
								<div class="single-footer-caption mb-30">
									<div class="footer-tittle">
										<div class="footer-logo mb-20">
											<a href="index.html"><img
												src="../assets/img/logo/title_logo.jpg" height="170px"
												width="154px" alt=""></a>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
							<div class="single-footer-caption mb-50">
								<div class="footer-tittle">
									<h4>Contact Info</h4>
									<ul>
										<li>
											<p>Address : Thoothukudi, Tamilnadu, India</p>
										</li>
										<li><a href="#">Phone : +91 9487409407</a></li>
										<li><a href="#">Email : CharityLink@gmail.com</a></li>
									</ul>
								</div>

							</div>
						</div>
						<div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
							<div class="single-footer-caption mb-50">
								<div class="footer-tittle">
									<h4>Important Link</h4>
									<ul>
										<li><a href="#"> View Project</a></li>
										<li><a href="#">Contact Us</a></li>
										<li><a href="#">Testimonial</a></li>
										<li><a href="#">Proparties</a></li>
										<li><a href="#">Support</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- footer-bottom -->
			<div class="footer-bottom-area">
				<div class="container">
					<div class="footer-border">
						<div class="row d-flex justify-content-between align-items-center">
							<div class="col-xl-2 col-lg-3">
								<div class="footer-social f-right">
									<a href="https://twitter.com/ashokkumar_dev"><i
										class="fab fa-twitter"></i></a> <a
										href="https://www.instagram.com/ashokkumar_developer/"><i
										class="fab fa-instagram"></i></a> <a
										href="https://www.linkedin.com/in/ashok-kumar-94b22b211"><i
										class="fab fa-linkedin-in"></i></a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>

	<!-- Scroll Up -->
	<div id="back-top">
		<a title="Go to Top" href="#"> <i class="fas fa-level-up-alt"></i></a>
	</div>

	<!-- JS here -->

	<script src="./../assets/js/vendor/modernizr-3.5.0.min.js"></script>
	<!-- Jquery, Popper, Bootstrap -->
	<script src="./../assets/js/vendor/jquery-1.12.4.min.js"></script>
	<script src="./../assets/js/popper.min.js"></script>
	<script src="./../assets/js/bootstrap.min.js"></script>
	<!-- Jquery Mobile Menu -->
	<script src="./../assets/js/jquery.slicknav.min.js"></script>

	<!-- Jquery Slick , Owl-Carousel Plugins -->
	<script src="./../assets/js/owl.carousel.min.js"></script>
	<script src="./../assets/js/slick.min.js"></script>
	<!-- One Page, Animated-HeadLin -->
	<script src="./../assets/js/wow.min.js"></script>
	<script src="./../assets/js/animated.headline.js"></script>
	<script src="./../assets/js/jquery.magnific-popup.js"></script>

	<!-- Date Picker -->
	<script src="./../assets/js/gijgo.min.js"></script>
	<!-- Nice-select, sticky -->
	<script src="./../assets/js/jquery.nice-select.min.js"></script>
	<script src="./../assets/js/jquery.sticky.js"></script>
	<!-- Progress -->
	<script src="./../assets/js/jquery.barfiller.js"></script>

	<!-- counter , waypoint,Hover Direction -->
	<script src="./../assets/js/jquery.counterup.min.js"></script>
	<script src="./../assets/js/waypoints.min.js"></script>
	<script src="./../assets/js/jquery.countdown.min.js"></script>
	<script src="./../assets/js/hover-direction-snake.min.js"></script>

	<!-- contact js -->
	<script src="./../assets/js/contact.js"></script>
	<script src="./../assets/js/jquery.form.js"></script>
	<script src="./../assets/js/jquery.validate.min.js"></script>
	<script src="./../assets/js/mail-script.js"></script>
	<script src="./../assets/js/jquery.ajaxchimp.min.js"></script>

	<!-- Jquery Plugins, main Jquery -->
	<script src="./../assets/js/plugins.js"></script>
	<script src="./../assets/js/main.js"></script>

</body>
</html>